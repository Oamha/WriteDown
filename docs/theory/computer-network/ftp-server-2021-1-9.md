## FTP服务
::: tip 基本概念
FTP(File Transfer Protocol)文件传输协议，屏蔽了各计算机系统的差异，适用于在异构网络中任意计算机之间传送文件。
:::
### 1、FTP的工作原理
+ FTP使用客户服务器模式；
+ FTP服务进程分为两大部分：一个主进程（负责接收新的请求）和多个从属进程（负责处理各个请求）；

### 2、工作流程
+ 打开21端口，使客户进程能够连接上；
+ 等待客户进程发出连接请求；
+ 启动从属进程处理客户进程发来的请求，从属进程对客户进程的请求处理完毕后即终止；
+ 回到等待状态，继续接受其它客户进程发来的请求，主进程和从属进程的处理是并行的；
+ 进行文件传输时，客户端和服务器之间要建立两个并行的TCP连接，控制连接和数据连接，分别用于传输命令和传输数据；
+ 客户进程发出连接请求时，要寻找服务端21端口，同时要告诉服务端自己的另一个端口，接着，服务端用20端口和该端口建立连接进行数据传输；

### 3、工作流程图
<Common-Thumb :prefix="'/img/theory/computer-network'" :urls="'ftp-server-principle.png'"/>
